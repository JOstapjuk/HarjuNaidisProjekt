<!--https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch - Using the Fetch API -->
<!--https://vuejs.org/guide/essentials/forms.html - Form Input Bindings --> 
<!--https://getbootstrap.com/docs/5.0/forms/form-control/ - Form controls -->
<!--https://www.w3schools.com/bootstrap/bootstrap_forms_inputs2.asp - Bootstrap Form Inputs -->
<!--https://getbootstrap.com/docs/3.4/css/#buttons - Bootstrap buttons-->


<!DOCTYPE html>
<html lang="eng">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no maximum-scale=1.0 minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <style>
        h1,h4, .btn {
            font-family: cursive;
        }
        </style>
    </head>
    <body>
        <h1>API-mängud</h1>
        <div id="app">
            <button type="button" class="btn btn-success" style="margin-bottom: 15px;" data-toggle="modal" data-target="#addGameModal">
                Lisa uus mäng
            </button>
            
            <table id="gamesTable" class="table table-striped table-bordered">
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Tegevused</th>
                </tr>
                <tr v-for="game in games">
                    <td @click="getGame(game.id)" style="cursor: pointer;">{{ game.name }}</td>
                    <td>{{ game.price }}</td>
                    <td>
                        <button @click="deleteGame(game.id)" class="btn btn-danger btn-sm">Kustuta</button>
                    </td>
                </tr>
            </table>

            <div id="gameInfoModal" class="modal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>
                            <h4 class="modal-title">Mängu detailid</h4>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped">
                                <tr><th>ID</th><td>{{gameInModal.id}}</td></tr>
                                <tr>
                                    <th >Name</th>
                                    <td>
                                        <input v-model="gameInModal.name" type="text" class="form-control">
                                    </td>
                                </tr>
                                <tr>
                                    <th>Price</th>
                                    <td>
                                        <input v-model="gameInModal.price" type="number" step="0.01" class="form-control">
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" @click="updateGame(gameInModal.id, gameInModal)">Uuenda</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Sulge</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="addGameModal" class="modal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>
                            <h4 class="modal-title">Lisa uus mäng</h4>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="gameName">Name:</label>
                                    <input v-model="newGame.name" type="text" class="form-control" id="gameName" required>
                                </div>
                                <div class="form-group">
                                    <label for="gamePrice">Price:</label>
                                    <input v-model.number="newGame.price" type="number" step="0.01" class="form-control" id="gamePrice" required>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success" @click="addGameAndClose">Lisa mäng</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Tühista</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://unpkg.com/vue@3.5.22/dist/vue.global.js"></script>
        <script src="rest-client.js"></script>
    </body>
</html>